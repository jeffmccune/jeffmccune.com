---
layout: post
title: Update a NetBoot Install or ASR Image
tags:
- Mac OS X
- System Administration
status: publish
type: post
published: true
meta: {}
---
<a href="http://northstarlabs.net/blog/wp-content/uploads/2007/06/niu.png" title="System Image Utility"><img src="http://northstarlabs.net/blog/wp-content/uploads/2007/06/niu.png" alt="System Image Utility" align="right" height="96" width="96" /></a>We recently got some new hardware in, so I decided to update our <a href="http://www.apple.com/server/macosx/netbootnetworkinstall.html" title="Apple - NetBoot">NetBoot-Install</a> root file system to Mac OS X 10.4.10 from 10.4.5.  A common problem with NetBoot-Installation is new hardware shipping with updated kernel extensions.  These machines often refuse to boot over the network unless the image is updated to include the new drivers.

In the past, I've re-created a new NBI image from the software that shipped with the new hardware, but that process is long and cumbersome so I decided to try applying the 10.4.10 update to the 10.4.5 image itself.Â  I've successfully augmented my existing <a href="http://www.bombich.com/" title="Mike Bombich - NetBoot Ninja">Net Restore Helper</a> 10.4.5 image to 10.4.10 using the following procedure:
<ol>
	<li>Convert and copy the Read/Only DMG to a Read/Write one</li>
	<li>Resize the DMG up to 4G</li>
	<li>Install the Combo Update into the DMG</li>
	<li>Copy out the kernel, boot loader</li>
	<li>Make a new extension cache</li>
	<li>Resize the DMG back down</li>
	<li>Convert the R/W DMG to R/O</li>
	<li>Move everything into place.</li>
</ol>
More detail with full commands and their output are available in my wiki.  Check them out here: <a href="http://trac.northstarlabs.net/project/northstarlabs/wiki/MacOSXNetBootInstallUpdate" title="MacOSX NetBoot Install Update">MacOSXNetBootInstallUpdate</a>

There's also no reason you can't apply this method to an ASR image itself in order to update applications you're deploying in your golden master image.

Links you might find useful...
<ul>
	<li><a href="http://www.macgeekery.com/hacks/hardware/make_any_mac_a_netboot_server" title="Make Any Mac a NetBoot Server">Make Any Mac a NetBoot Server</a></li>
	<li><a href="https://www.math.ohio-state.edu/wiki/administration/macosx/netboot/bsdp_with_isc_dhcp" title="NetBoot with ISC DHCP">Make Any Unix machine a NetBoot Server</a></li>
</ul>
